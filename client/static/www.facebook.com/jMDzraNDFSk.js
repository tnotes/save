if (self.CavalryLogger) { CavalryLogger.start_js(["QZNeR"]); }

__d("UFI2CommentsListState",["invariant","ErrorNormalizeUtils","FBLogger","UFI2ViewOption","gkx"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function h(a){var b=a.count,c=a.direction,d=a.error,e=a.hasMore,f=a.isLoading,g=a.pageSize;a=a.totalCount;if(a!=null&&a===0)return null;if(b===0)return null;return!e?null:{__type:"PAGER",count:Math.min(b,g),direction:c,status:{error:d,pending:f}}}function i(a){var b=a.count,c=a.expanded;a=a.minCountToShowCollapser;if(!c)return null;if(a==null)return null;return b<=a?null:{__type:"REPLIES_COLLAPSER",count:b}}function j(a){var b=a.error,c=a.expanded,d=a.isLoading;a=a.totalCount;return c||a===0?null:{__type:"REPLIES_EXPANDER",count:a,status:{error:b,pending:d}}}function k(a){var b=a.direction;a=a.page;if(b==="forward"){b=Math.max(0,a.afterCount-1);return babelHelpers["extends"]({},a,{afterCount:b,hasNext:b>0})}b=Math.max(0,a.beforeCount-1);return babelHelpers["extends"]({},a,{beforeCount:b,hasPrevious:b>0})}function l(a,b){var c=m(a,b);a.__type!=="INITIAL_STATE"&&(b!=null||g(0,5935));a.__type==="RECEIVE_NEW_COMMENT";return c}function m(a,c){__p&&__p();if(a.__type==="INITIAL_STATE"){var d,e=a.args,f=e.afterCount,l=e.beforeCount,m=e.canViewerComment,n=e.commentsByID,o=e.commentIDs,r=e.feedbackTargetID,t=e.hasNext,u=e.hasPrevious,v=e.hiddenCommentIDs,w=e.initiallyExpanded,x=e.pageSize,y=e.shouldRenderComposerPreemptively,z=e.topLevelFeedbackTargetID,A=e.totalCount;e=e.viewOption;d={backward:h({count:l,direction:"backward",error:null,hasMore:u,isLoading:(d=c==null?void 0:(d=c.pagers)==null?void 0:(d=d.backward)==null?void 0:(d=d.status)==null?void 0:d.pending)!=null?d:!1,pageSize:x,totalCount:A}),forward:h({count:f,direction:"forward",error:null,hasMore:t,isLoading:(d=c==null?void 0:(d=c.pagers)==null?void 0:(d=d.forward)==null?void 0:(d=d.status)==null?void 0:d.pending)!=null?d:!1,pageSize:x,totalCount:A})};var ca={};v.forEach(function(a){ca[a]="COLLAPSED"});v={canViewerComment:m,commentPages:o.length>0?[{__type:"COMMENTS_PAGE",afterCount:f,beforeCount:l,commentIDs:o,hasNext:t,hasPrevious:u,state:"VISIBLE"}]:[],commentsByID:n,commentsHiddenByViewer:ca,expanded:(x=c==null?void 0:c.expanded)!=null?x:w,feedbackTargetID:r,hasPaged:{backward:!1,forward:!1},locallyComposedCommentIDs:[],newCommentsPage:{__type:"NEW_COMMENTS_PAGE",commentIDs:[],visibleStates:{}},pagers:d,shouldComposerRenderWhenListIsExpanded:y,topLevelFeedbackTargetID:z,viewOption:e};if(a.args.depth===0)return babelHelpers["extends"]({},v,{__type:"DEPTH_0",status:{error:null,pending:!1}});m=a.args.minCountToShowCollapser;f=null;c!=null&&c.__type==="DEPTH_1"&&(f=c.repliesExpander);return babelHelpers["extends"]({},v,{__type:"DEPTH_1",repliesCollapser:i({count:o.length,expanded:w,minCountToShowCollapser:m}),repliesExpander:j({error:null,expanded:(l=c==null?void 0:c.expanded)!=null?l:w,isLoading:(n=(t=f)==null?void 0:(u=t.status)==null?void 0:u.pending)!=null?n:!1,totalCount:A})})}c!=null||g(0,5935);switch(a.__type){case"COLLAPSE_LIST":x=a.args;r=x.depth;d=x.totalCount;if(c.expanded===!1)return c;if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{expanded:!1});y=s.getCommentsCount({depth:r,state:c})===0;z=d>0&&y===!0;z&&b("FBLogger")("ufi2").warn("UFI2CommentsListState.updater(...): COLLAPSE_LIST: expected list not to be empty if connection is not empty");return babelHelpers["extends"]({},c,{expanded:!1,repliesCollapser:null,repliesExpander:j({error:c.repliesExpander?c.repliesExpander.status.error:null,expanded:!1,isLoading:!1,totalCount:d})});case"DELETE_COMMENT":e=a.args;var B=e.commentID;v=e.depth;o=c.commentPages;var C=c.newCommentsPage;m=c.locallyComposedCommentIDs;if(o.length===0&&C.commentIDs.length===0)return c;l=C.commentIDs.filter(function(a){return a!==B});w=s.getVisibleCommentsCount({depth:v,state:c});f=l.length<C.commentIDs.length;if(f){var da={};l.forEach(function(a){da[a]=C.visibleStates[a]});t=babelHelpers["extends"]({},C,{commentIDs:l,visibleStates:da});u=o.map(function(a){return k({direction:"backward",page:a})});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:u,newCommentsPage:t});a.args.depth!==0||g(0,18482);n=a.args.minCountToShowCollapser;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:u,newCommentsPage:t,repliesCollapser:i({count:w-1,expanded:c.expanded,minCountToShowCollapser:n})})}var D=null,E=!1;A=o.map(function(a,b){__p&&__p();if(E)return k({direction:"backward",page:a});var c=a.commentIDs.filter(function(a){return a!==B});if(c.length<a.commentIDs.length){E=!0;D=b;return babelHelpers["extends"]({},a,{commentIDs:c})}return a}).map(function(a,b){return a&&D!=null&&b<D?k({direction:"forward",page:a}):a}).filter(Boolean);if(E===!1){b("FBLogger")("ufi2").warn("UFI2CommentsListState.updater(...): Tried deleting a comment that isnt present");return c}x=m.filter(function(a){return a!==B});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:A,locallyComposedCommentIDs:x});a.args.depth!==0||g(0,18482);return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:A,locallyComposedCommentIDs:x,repliesCollapser:i({count:w-1,expanded:c.expanded,minCountToShowCollapser:a.args.minCountToShowCollapser})});case"EXPAND_HIDDEN_COMMENTS":r=a.args.commentIDs;var ea=c.commentsHiddenByViewer,F=babelHelpers["extends"]({},ea);r.forEach(function(a){var c=ea[a];if(c==null){b("FBLogger")("ufi2").warn("UFI2CommentsListState.updater(...): Tried expanding a comment that is not hidden");return}c==="COLLAPSED"&&(F[a]="EXPANDED")});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsHiddenByViewer:F}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsHiddenByViewer:F});case"EXPAND_LIST":y=a.args;z=y.depth;d=y.totalCount;e=c.commentPages;v=c.newCommentsPage;if(c.expanded===!0&&c.shouldComposerRenderWhenListIsExpanded===!0)return c;if(z!==0&&s.isRepliesExpanderLoading({depth:z,state:c}))return c;if(d===0)return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",expanded:!0,shouldComposerRenderWhenListIsExpanded:!0}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:!0,repliesCollapser:null,repliesExpander:null,shouldComposerRenderWhenListIsExpanded:!0});f=s.getVisibleCommentsCount({depth:z,state:c});if(f===0){l=s.getCommentsCount({depth:z,state:c})===0;if(l)return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",expanded:!0,shouldComposerRenderWhenListIsExpanded:!0,status:{error:null,pending:!0}}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:!1,repliesCollapser:null,repliesExpander:j({error:null,expanded:!1,isLoading:!0,totalCount:d})});u=e.length>0?e[0]:null;t=u!=null?[babelHelpers["extends"]({},u,{state:"VISIBLE"})].concat(e.slice(1)):e;var fa={};v.commentIDs.forEach(function(a){fa[a]="VISIBLE"});n=babelHelpers["extends"]({},v,{visibleStates:fa});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:t,expanded:!0,newCommentsPage:n,shouldComposerRenderWhenListIsExpanded:!0});a.args.depth!==0||g(0,18482);o=(u!=null?u.commentIDs.length:0)+v.commentIDs.length;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:t,expanded:!0,newCommentsPage:n,repliesCollapser:i({count:o,expanded:!0,minCountToShowCollapser:a.args.minCountToShowCollapser}),repliesExpander:null,shouldComposerRenderWhenListIsExpanded:!0})}if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",expanded:!0,shouldComposerRenderWhenListIsExpanded:!0});a.args.depth!==0||g(0,18482);return babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:!0,repliesCollapser:i({count:f,expanded:!0,minCountToShowCollapser:a.args.minCountToShowCollapser}),repliesExpander:null,shouldComposerRenderWhenListIsExpanded:!0});case"HIDE_COMMENTS":m=a.args.commentIDs;A=c.commentsHiddenByViewer;var G=babelHelpers["extends"]({},A);m.forEach(function(a){G[a]="LOCALLY_HIDDEN"});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsHiddenByViewer:G}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsHiddenByViewer:G});case"RECEIVE_COMMENTS_PAGE":x=c.commentPages;var H=c.newCommentsPage;w=c.pagers;r=c.locallyComposedCommentIDs;y=a.args;var I=y.commentIDs;z=y.depth;l=y.direction;d=y.feedbackTargetID;e=y.hiddenCommentIDs;u=y.pageSize;v=H.commentIDs.filter(function(a){return!I.includes(a)});t=r.filter(function(a){return!I.includes(a)});var J={};v.forEach(function(a){J[a]=H.visibleStates[a]});n=babelHelpers["extends"]({},H,{commentIDs:v,visibleStates:J});var ga=new Set(x.reduce(function(a,b){return a.concat(b.commentIDs)},[]));o=I.filter(function(a){return!ga.has(a)});l==="forward"&&a.args.hasNext===!0&&a.args.afterCount===0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",d).warn("UFI2CommentsListState.receiveCommentsPage: Received page of comments that has_next_page but after_count is 0");a.args.direction==="forward"&&a.args.hasNext===!1&&a.args.afterCount>0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",d).warn("UFI2CommentsListState.receiveCommentsPage: Received page of comments that does NOT have next_page but after_count is > 0");a.args.direction==="backward"&&a.args.hasPrevious===!0&&a.args.beforeCount===0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",d).warn("UFI2CommentsListState.receiveCommentsPage: Received page of comments that has_previous_page but before_count is 0");a.args.direction==="backward"&&a.args.hasPrevious===!1&&a.args.beforeCount>0&&b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",d).warn("UFI2CommentsListState.receiveCommentsPage: Received page of comments that does NOT have previous_page but before_count is > 0");var K=s.isPagerLoading({depth:z,direction:l,state:c})===!0;f=z!==0&&s.isRepliesExpanderLoading({depth:z,state:c});A=c.shouldComposerRenderWhenListIsExpanded===!0||K===!0||f===!0;var L=babelHelpers["extends"]({},c.commentsHiddenByViewer);e.forEach(function(a){Object.prototype.hasOwnProperty.call(L,a)||(L[a]="COLLAPSED")});m=ga.size;if(z!==0&&a.args.direction==="forward"&&m===0){y=a.args;r=y.afterCount;d=y.hasNext;l={backward:null,forward:h({count:r,direction:"forward",error:null,hasMore:d,isLoading:!1,pageSize:u})};var M=c.expanded||f?"VISIBLE":"HIDDEN";e={__type:"COMMENTS_PAGE",afterCount:r,beforeCount:v.length,commentIDs:o,hasNext:d,hasPrevious:!1,state:M};v.forEach(function(a){J[a]=M});n=babelHelpers["extends"]({},H,{commentIDs:v,visibleStates:J});a.args.depth!==0||g(0,18482);c.__type==="DEPTH_1"||g(0,18482);m=a.args.minCountToShowCollapser;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:[e],commentsHiddenByViewer:L,expanded:M==="VISIBLE",locallyComposedCommentIDs:t,newCommentsPage:n,pagers:l,repliesCollapser:i({count:o.length,expanded:f,minCountToShowCollapser:m}),repliesExpander:f?null:c.repliesExpander,shouldComposerRenderWhenListIsExpanded:A})}y=x[0];r=x[x.length-1];d=s.getVisibleCommentsCount({depth:z,state:c});if(a.args.direction==="backward"){K&&y!=null&&(y.state==="VISIBLE"||g(0,5938));e=a.args;l=e.beforeCount;m=e.hasPrevious;z=l<=v.length;z&&(J={},n.commentIDs.forEach(function(a){J[a]=K?"VISIBLE":"HIDDEN"}),n=babelHelpers["extends"]({},n,{visibleStates:J}));e=l-n.commentIDs.length-t.length;v=babelHelpers["extends"]({},w,{backward:K?h({count:e,direction:"backward",error:null,hasMore:m&&!z,isLoading:!1,pageSize:u}):w.backward});e={__type:"COMMENTS_PAGE",afterCount:((e=y==null?void 0:y.afterCount)!=null?e:0)+((y=y==null?void 0:(e=y.commentIDs)==null?void 0:e.length)!=null?y:0),beforeCount:l,commentIDs:o,hasNext:!0,hasPrevious:m,state:K||f?"VISIBLE":"HIDDEN"};if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:[e].concat(x),commentsHiddenByViewer:L,locallyComposedCommentIDs:t,newCommentsPage:n,pagers:v,shouldComposerRenderWhenListIsExpanded:A});a.args.depth!==0||g(0,18482);y=a.args.minCountToShowCollapser;l=f?!0:c.expanded;m=d+(e.state==="VISIBLE"?o.length:0)+(z&&K?n.commentIDs.length:0);return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:[e].concat(x),commentsHiddenByViewer:L,expanded:l,locallyComposedCommentIDs:t,newCommentsPage:n,pagers:v,repliesCollapser:i({count:m,expanded:l,minCountToShowCollapser:y}),repliesExpander:f?null:c.repliesExpander,shouldComposerRenderWhenListIsExpanded:A})}K&&r!=null&&(r.state==="VISIBLE"||g(0,5939));z=a.args;e=z.afterCount;v=z.hasNext;m=babelHelpers["extends"]({},w,{forward:K?h({count:e,direction:"forward",error:null,hasMore:v,isLoading:!1,pageSize:u}):w.forward});u={__type:"COMMENTS_PAGE",afterCount:e,beforeCount:((l=r==null?void 0:r.beforeCount)!=null?l:0)+((z=r==null?void 0:(y=r.commentIDs)==null?void 0:y.length)!=null?z:0),commentIDs:o,hasNext:v,hasPrevious:!0,state:K||f?"VISIBLE":"HIDDEN"};var N=0;w=f?x.map(function(a){a.state==="HIDDEN"&&(N+=a.commentIDs.length);return babelHelpers["extends"]({},a,{state:"VISIBLE"})}):x;if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:[].concat(w,[u]),commentsHiddenByViewer:L,locallyComposedCommentIDs:t,newCommentsPage:n,pagers:m,shouldComposerRenderWhenListIsExpanded:A});a.args.depth!==0||g(0,18482);e=a.args.minCountToShowCollapser;l=u.state==="VISIBLE"?d+N+o.length:d+N;r=f?!0:c.expanded;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:[].concat(w,[u]),commentsHiddenByViewer:L,expanded:r,locallyComposedCommentIDs:t,newCommentsPage:n,pagers:m,repliesCollapser:i({count:l,expanded:r,minCountToShowCollapser:e}),repliesExpander:f?null:c.repliesExpander,shouldComposerRenderWhenListIsExpanded:A});case"RECEIVE_NEW_COMMENT":y=a.args;var O=y.commentID;z=y.depth;v=y.pageSize;x=y.prevTotalCount;o=y.totalCount;d=c.commentPages;w=c.expanded;var P=c.newCommentsPage;u=c.pagers;t=c.commentsByID;n=c.locallyComposedCommentIDs;m=c.viewOption;l=s.getCommentsCount({depth:z,state:c})===0;r=Object.prototype.hasOwnProperty.call(P.visibleStates,O)||d.some(function(a){return a.commentIDs.includes(O)});if(r)return c;e=t[O]!=null&&t[O].is_locally_composed===!0;f=c.repliesExpander!=null?babelHelpers["extends"]({},c.repliesExpander,{count:Math.min(c.repliesExpander.count+1,o)}):null;var ha=(y=(A=t[O])==null?void 0:A.reply_comment_parent_fbid)!=null?y:(r=t[O])==null?void 0:(A=r.reply_parent_comment)==null?void 0:A.id;if(c.__type!=="DEPTH_0"&&a.args.depth!==0&&m==="RANKED_SUB_REPLIES"&&(ha!=null||d.length===0)){var Q=!1;y=d.map(function(a){__p&&__p();if(!Q){var b=a.commentIDs.indexOf(ha);if(b>=0){Q=!0;var c=[].concat(a.commentIDs);c.splice(b+1,0,O);return babelHelpers["extends"]({},a,{commentIDs:c})}}return a});y.length===0&&(y.push({__type:"COMMENTS_PAGE",afterCount:0,beforeCount:0,commentIDs:[O],hasNext:!1,hasPrevious:!1,state:"VISIBLE"}),Q=!0);r=e?[O].concat(n):n;if(Q)return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:y,locallyComposedCommentIDs:r})}if(d.length===0){y=babelHelpers["extends"]({},P,{commentIDs:[O].concat(P.commentIDs),visibleStates:babelHelpers["extends"]({},P.visibleStates,(A={},A[O]=w||e||z!==0&&l&&x===0?"VISIBLE":"HIDDEN",A))});A=((r=t[O])==null?void 0:r.is_locally_composed)===!0?[O].concat(n):n;if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",locallyComposedCommentIDs:A,newCommentsPage:y});a.args.depth!==0||g(0,18482);t=a.args.minCountToShowCollapser;r=l&&x===0?!0:w;return babelHelpers["extends"]({},c,{__type:"DEPTH_1",expanded:r,locallyComposedCommentIDs:A,newCommentsPage:y,repliesCollapser:i({count:y.commentIDs.length,expanded:w,minCountToShowCollapser:t}),repliesExpander:f,shouldComposerRenderWhenListIsExpanded:!0})}l=d[0];r=p(c);if(e){var R=!1,S=babelHelpers["extends"]({},P.visibleStates),T=!b("UFI2ViewOption").isChronologicalOrder(m)&&c.__type!=="DEPTH_0",ia=[],U=[];A=(T?[].concat(d).reverse():d).map(function(a){if(!R&&a.state==="VISIBLE"){R=!0;P.commentIDs.forEach(function(a){S[a]==="VISIBLE"?(delete S[a],U.push(a)):ia.push(a)});return babelHelpers["extends"]({},a,{commentIDs:T?[].concat(a.commentIDs,U.reverse(),[O]):[O].concat(U,a.commentIDs)})}return R?babelHelpers["extends"]({},a,{afterCount:T?a.afterCount+1+U.length:a.afterCount,beforeCount:T?a.beforeCount:a.beforeCount+1+U.length}):a});y=babelHelpers["extends"]({},P,{commentIDs:ia,visibleStates:S});t=[O].concat(n);if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:A,locallyComposedCommentIDs:t,newCommentsPage:y});a.args.depth!==0||g(0,18482);e=a.args.minCountToShowCollapser;m=s.getVisibleCommentsCount({depth:z,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:T?A.reverse():A,locallyComposedCommentIDs:t,newCommentsPage:y,repliesCollapser:i({count:m+1,expanded:w,minCountToShowCollapser:e}),repliesExpander:f,shouldComposerRenderWhenListIsExpanded:!0})}else if(r&&ba(c)){n=d.map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1})});t=babelHelpers["extends"]({},P,{commentIDs:[O].concat(P.commentIDs),visibleStates:babelHelpers["extends"]({},P.visibleStates,(A={},A[O]="VISIBLE",A))});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:n,newCommentsPage:t});a.args.depth!==0||g(0,18482);y=a.args.minCountToShowCollapser;m=s.getVisibleCommentsCount({depth:z,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:n,newCommentsPage:t,repliesCollapser:i({count:m+1,expanded:w,minCountToShowCollapser:y}),repliesExpander:f,shouldComposerRenderWhenListIsExpanded:!0})}else if(r&&P.commentIDs.length===0){e=u.backward!=null?babelHelpers["extends"]({},u,{backward:babelHelpers["extends"]({},u.backward,{count:Math.min(u.backward.count+1,v)})}):u;A=l.commentIDs.length<v;if(A){z=[babelHelpers["extends"]({},l,{commentIDs:[O].concat(l.commentIDs)})].concat(d.slice(1).map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1})}));return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:z,pagers:e}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:z,pagers:e,repliesExpander:f})}n=[{__type:"COMMENTS_PAGE",afterCount:l.afterCount+l.commentIDs.length,beforeCount:0,commentIDs:[O],hasNext:!0,hasPrevious:!1,state:"HIDDEN"},babelHelpers["extends"]({},l,{beforeCount:1,hasPrevious:!0})].concat(d.slice(1).map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1})}));return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:n,pagers:e}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:n,pagers:e,repliesExpander:f})}else{t=o<=x;m=t?d:d.map(function(a){return babelHelpers["extends"]({},a,{beforeCount:a.beforeCount+1,hasPrevious:!0})});w=u.backward!=null?babelHelpers["extends"]({},u,{backward:babelHelpers["extends"]({},u.backward,{count:t?u.backward.count:Math.min(u.backward.count+1,v)})}):u;r=babelHelpers["extends"]({},P,{commentIDs:[O].concat(P.commentIDs),visibleStates:babelHelpers["extends"]({},P.visibleStates,(y={},y[O]="HIDDEN",y))});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:m,newCommentsPage:r,pagers:w}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:m,newCommentsPage:r,pagers:w,repliesExpander:f})}case"RECEIVE_REFETCH_LIST":A=a.args.depth;z=c.feedbackTargetID;l=c.topLevelFeedbackTargetID;n=c.viewOption;A===0||g(0,5940);s.isListLoading({depth:A,state:c})||g(0,5941);e=aa.getInitialState({args:babelHelpers["extends"]({},a.args,{depth:0,feedbackTargetID:z,initiallyExpanded:!0,topLevelFeedbackTargetID:l,viewOption:n}),state:null});e.__type==="DEPTH_0"||g(0,5940);return babelHelpers["extends"]({},e,{__type:"DEPTH_0",expanded:c.expanded,status:{error:null,pending:!1}});case"REQUEST_COMMENTS_PAGE":o=a.args;x=o.depth;d=o.direction;t=o.pageSize;v=c.commentPages;u=c.expanded;y=c.newCommentsPage;m=c.pagers;u||g(0,5942);s.isPagerLoading({depth:x,direction:d,state:c})&&g(0,5943);x===0&&(s.isListLoading({depth:x,state:c})&&g(0,5944));x!==0&&(s.isRepliesExpanderLoading({depth:x,state:c})&&g(0,5945));if(d==="backward"){r=v.findIndex(function(a){return a.state==="VISIBLE"});w=-1;if(r>-1){f=v[r];f.hasPrevious===!1&&b("FBLogger")("ufi2").mustfix("UFI2CommentsList.updater(...): REQUEST_COMMENTS_PAGE - Can't request previous comments if there are no more comments available, feedbackID: %s",c.topLevelFeedbackTargetID);f.hasPrevious===!0||g(0,5946);w=r-1}else r===-1&&v.length>0&&(w=0);A=v[w];z=p(c)&&q(c,"HIDDEN");if(A&&A.state==="HIDDEN"){l=[].concat(v);l[w]=babelHelpers["extends"]({},A,{state:"VISIBLE"});n=babelHelpers["extends"]({},m,{backward:h({count:A.beforeCount,direction:"backward",error:null,hasMore:A.hasPrevious,isLoading:!1,pageSize:t})});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:l,hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:n,shouldComposerRenderWhenListIsExpanded:!0});a.args.depth!==0||g(0,18482);e=a.args.minCountToShowCollapser;o=s.getVisibleCommentsCount({depth:x,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:l,hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:n,repliesCollapser:i({count:o+A.commentIDs.length,expanded:c.expanded,minCountToShowCollapser:e}),shouldComposerRenderWhenListIsExpanded:!0})}else if(z){var ja={};y.commentIDs.forEach(function(a){ja[a]="VISIBLE"});u=babelHelpers["extends"]({},y,{visibleStates:ja});d=babelHelpers["extends"]({},m,{backward:null});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),newCommentsPage:u,pagers:d,shouldComposerRenderWhenListIsExpanded:!0});a.args.depth!==0||g(0,18482);f=a.args.minCountToShowCollapser;r=s.getVisibleCommentsCount({depth:x,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),newCommentsPage:u,pagers:d,repliesCollapser:i({count:r+u.commentIDs.length,expanded:c.expanded,minCountToShowCollapser:f}),shouldComposerRenderWhenListIsExpanded:!0})}else{w=babelHelpers["extends"]({},m,{backward:babelHelpers["extends"]({},m.backward,{status:{error:null,pending:!0}})});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:w}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",hasPaged:babelHelpers["extends"]({},c.hasPaged,{backward:!0}),pagers:w})}}l=[].concat(v).reverse().findIndex(function(a){return a.state==="VISIBLE"});n=-1;if(l>-1){o=v.length-1-l;A=v[o];A.hasNext===!0||g(0,5946);n=o+1}else l===-1&&v.length>0&&(n=v.length-1);e=v[n];if(e&&e.state==="HIDDEN"){z=[].concat(v);z[n]=babelHelpers["extends"]({},e,{state:"VISIBLE"});y=babelHelpers["extends"]({},m,{forward:h({count:e.afterCount,direction:"forward",error:null,hasMore:e.hasNext,isLoading:!1,pageSize:t})});if(c.__type==="DEPTH_0")return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:z,hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:y,shouldComposerRenderWhenListIsExpanded:!0});a.args.depth!==0||g(0,18482);d=a.args.minCountToShowCollapser;r=s.getVisibleCommentsCount({depth:x,state:c});return babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:z,hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:y,repliesCollapser:i({count:r+e.commentIDs.length,expanded:c.expanded,minCountToShowCollapser:d}),shouldComposerRenderWhenListIsExpanded:!0})}else{u=babelHelpers["extends"]({},m,{forward:babelHelpers["extends"]({},m.forward,{status:{error:null,pending:!0}})});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:u}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",hasPaged:babelHelpers["extends"]({},c.hasPaged,{forward:!0}),pagers:u})}case"REQUEST_REFETCH_LIST":f=a.args.depth;f===0&&c.__type==="DEPTH_0"||g(0,5940);s.isListLoading({depth:f,state:c})&&g(0,5941);return babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:[],expanded:!0,hasPaged:{backward:!1,forward:!1},locallyComposedCommentIDs:[],newCommentsPage:{__type:"NEW_COMMENTS_PAGE",commentIDs:[],visibleStates:{}},pagers:{backward:null,forward:null},status:{error:null,pending:!0}});case"SET_CAN_VIEWER_COMMENT":w=a.args.canViewerComment;return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",canViewerComment:w}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",canViewerComment:w});case"SET_COMMENTS_BY_ID":A=a.args.commentsByID;return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsByID:A}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsByID:A});case"SET_SERVER_COMMENT_ID":o=a.args;var V=o.clientCommentID,W=o.serverCommentID;l=c.commentPages;var X=c.newCommentsPage;v=c.locallyComposedCommentIDs;var Y=!1,Z={};n=X.commentIDs.map(function(a){if(a===V){Y=!0;Z[W]=X.visibleStates[a];return W}Z[a]=X.visibleStates[a];return a});if(Y){t=v.map(function(a){return a===V?W:a});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",locallyComposedCommentIDs:t,newCommentsPage:babelHelpers["extends"]({},c.newCommentsPage,{commentIDs:n,visibleStates:Z})}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",locallyComposedCommentIDs:t,newCommentsPage:babelHelpers["extends"]({},c.newCommentsPage,{commentIDs:n,visibleStates:Z})})}x=l.map(function(a){if(Y)return a;var b=a.commentIDs.map(function(a){if(a===V){Y=!0;return W}return a});return Y?babelHelpers["extends"]({},a,{commentIDs:b}):a});if(!Y)return c;z=v.map(function(a){return a===V?W:a});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentPages:x,locallyComposedCommentIDs:z}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentPages:x,locallyComposedCommentIDs:z});case"UNHIDE_COMMENTS":y=a.args.commentIDs;r=c.commentsHiddenByViewer;var $=babelHelpers["extends"]({},r);y.forEach(function(a){delete $[a]});return c.__type==="DEPTH_0"?babelHelpers["extends"]({},c,{__type:"DEPTH_0",commentsHiddenByViewer:$}):babelHelpers["extends"]({},c,{__type:"DEPTH_1",commentsHiddenByViewer:$});case"INITIAL_STATE":default:a.__type;throw new Error("UFI2CommentsListState: Invalid action type: "+a.__type)}}function n(a,c){__p&&__p();try{var d=l(a,c);return d}catch(f){d=b("ErrorNormalizeUtils").normalizeError(f);d=d.message;var e=a.__type==="REQUEST_COMMENTS_PAGE"||a.__type==="RECEIVE_COMMENTS_PAGE"?a.args.direction:"Unknown";b("FBLogger")("ufi2").catching(f).addMetadata("UFI","COMMENTS_LIST_ACTION",a.__type).addMetadata("UFI","COMMENTS_LIST_DEPTH",""+a.args.depth).addMetadata("UFI","COMMENTS_LIST_DIRECTION",e).mustfix("UFI2CommentsListState.updater(...): "+d);b("gkx")("676930")&&window.__enableUFI2CommentsListLogging===!0&&a.__type!=="SET_COMMENTS_BY_ID"&&console.groupEnd();if(!c)throw f;return c}}function a(a,b){return l(a,b)}function c(a,b){return l(a,b)}var aa={collapseList:function(a){var b=a.args;a=a.state;return n({__type:"COLLAPSE_LIST",args:b},a)},deleteComment:function(a){var b=a.args;a=a.state;return n({__type:"DELETE_COMMENT",args:b},a)},expandHiddenComments:function(a){var b=a.args;a=a.state;return n({__type:"EXPAND_HIDDEN_COMMENTS",args:b},a)},expandList:function(a){var b=a.args;a=a.state;return n({__type:"EXPAND_LIST",args:b},a)},getInitialState:function(a){var b=a.args;a=a.state;return n({__type:"INITIAL_STATE",args:b},a)},hideComments:function(a){var b=a.args;a=a.state;return n({__type:"HIDE_COMMENTS",args:b},a)},receiveCommentsPage:function(a){var b=a.args;a=a.state;return n({__type:"RECEIVE_COMMENTS_PAGE",args:b},a)},receiveNewComment:function(a){var b=a.args;a=a.state;return n({__type:"RECEIVE_NEW_COMMENT",args:b},a)},receiveRefetchList:function(a){var b=a.args;a=a.state;return n({__type:"RECEIVE_REFETCH_LIST",args:b},a)},requestCommentsPage:function(a){var b=a.args;a=a.state;return n({__type:"REQUEST_COMMENTS_PAGE",args:b},a)},requestRefetchList:function(a){var b=a.args;a=a.state;return n({__type:"REQUEST_REFETCH_LIST",args:b},a)},setCanViewerComment:function(a){var b=a.args;a=a.state;return n({__type:"SET_CAN_VIEWER_COMMENT",args:b},a)},setCommentsByID:function(a){var b=a.args;a=a.state;return n({__type:"SET_COMMENTS_BY_ID",args:b},a)},setServerCommentID:function(a){var b=a.args;a=a.state;return n({__type:"SET_SERVER_COMMENT_ID",args:b},a)},unhideComments:function(a){var b=a.args;a=a.state;return n({__type:"UNHIDE_COMMENTS",args:b},a)}};function o(a){var b=a.direction;a=a.state;b=b==="forward"?[].concat(a.commentPages).reverse():a.commentPages;return b.find(function(a){return a.state==="VISIBLE"})}function p(a){var b=a.commentPages;a=a.newCommentsPage;b=b[0];return!b?a.commentIDs.length>0:b.beforeCount-a.commentIDs.length===0}function ba(a){var b=a.commentPages;b=b[0];return!b?p(a)&&q(a,"VISIBLE"):p(a)&&b.state==="VISIBLE"&&q(a,"VISIBLE")}function q(a,b){var c=a.newCommentsPage;return c.commentIDs.every(function(a){return c.visibleStates[a]===b})}function r(a){var c=a.__type,d=a.commentPages,e=a.newCommentsPage;a=a.viewOption;c=c==="DEPTH_1"&&!b("UFI2ViewOption").isChronologicalOrder(a);a=d.filter(function(a){return a.state==="VISIBLE"}).reduce(function(a,b){return a.concat(b.commentIDs)},[]);d=e.commentIDs.filter(function(a){return e.visibleStates[a]==="VISIBLE"});return c?[].concat(a,d.reverse()):[].concat(d,a)}var s={canFetchInDirection:function(a){__p&&__p();var b=a.depth,c=a.direction,d=a.state;a=a.totalCount;if(a===0)return!1;a=d.commentPages;var e=d.newCommentsPage,f=s.isPagerLoading({depth:b,direction:c,state:d});if(f)return!1;f=b===0&&s.isListLoading({depth:b,state:d});if(f)return!1;f=b!==0&&s.isRepliesExpanderLoading({depth:b,state:d});if(f)return!1;if(a.length===0&&c==="forward")return!0;else if(a.length===0&&c==="backward")return!1;f=a[0];a=a[a.length-1];b=s.getPagerCount({depth:b,direction:"backward",state:d});b=b===e.commentIDs.length&&q(d,"HIDDEN");return c==="backward"?f.state!=="HIDDEN"&&!b&&f.hasPrevious:a.state!=="HIDDEN"&&a.hasNext},getCommentsCount:function(a){a.depth;a=a.state;var b=a.commentPages;a=a.newCommentsPage;return a.commentIDs.concat(b.reduce(function(a,b){return a.concat(b.commentIDs)},[])).length},getCountForFetch:function(a){__p&&__p();var b=a.depth,c=a.direction,d=a.pageSize;a=a.state;c=s.getPagerCount({depth:b,direction:c,state:a});if(c!=null)return c;if(b!==0){d!=null||g(0,5947);c=s.getRepliesExpanderCount({depth:b,state:a});if(c!=null)return Math.min(c,d)}return null},getHiddenStateForComment:function(a){var b=a.commentID;a.depth;a=a.state;a=a.commentsHiddenByViewer;return a[b]||null},getPagerCount:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return null;a=a[b];return a!=null?a.count:null},getPagerError:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return null;a=a[b];return a!=null?a.status.error:null},getRepliesCollapserCount:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return null;b=a.repliesCollapser;return b!=null?b.count:null},getRepliesExpanderCount:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return null;b=a.repliesExpander;return b!=null?b.count:null},getRepliesExpanderError:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return null;b=a.repliesExpander;return b!=null?b.status.error:null},getVisibleComments:function(a){__p&&__p();a.depth;a=a.state;var c=a.commentsByID,d=a.newCommentsPage,e=a.locallyComposedCommentIDs,f=a.viewOption;a=r(a);var g=a.map(function(a){var d=c[a];if(!d){b("FBLogger")("ufi2").warn("UFI2CommentsListState.getVisibleComments: Could not find comment locally: %s",a);return null}return d}).filter(Boolean);a.length>0&&g.length===0&&b("FBLogger")("ufi2").warn("UFI2CommentsListState.getVisibleComments: Could not find ANY of the %s comments locally",a.length);return!e.length&&d.commentIDs.length>0&&!(b("gkx")("1098171")&&!b("UFI2ViewOption").isChronologicalOrder(f))?g.sort(function(a,b){return((b=b.created_time)!=null?b:0)-((b=a.created_time)!=null?b:0)}):g},getVisibleCommentsCount:function(a){a.depth;a=a.state;return r(a).length},getVisibleCommentsGroupedByCollapsedState:function(a){__p&&__p();var b=a.depth,c=a.reverse,d=a.shouldCollapseComment;a=a.state;b=s.getVisibleComments({depth:b,state:a});a=c?b.slice().reverse():b;return a.reduce(function(a,b){__p&&__p();var c=d(b)?"COLLAPSED":"VISIBLE";if(a.length===0)return[{comments:[b],state:c}];var e=a[a.length-1],f=e.comments[e.comments.length-1];if(!f)return a;f=e.state;if(f===c){e.comments.push(b);return a}return[].concat(a,[{comments:[b],state:c}])},[])},getVisibleCommentsWithHiddenCommentsCollapsed:function(a){var b=a.depth,c=a.reverse,d=a.state;return s.getVisibleCommentsGroupedByCollapsedState({depth:b,reverse:c,shouldCollapseComment:function(a){return s.getHiddenStateForComment({commentID:a.id,depth:b,state:d})==="COLLAPSED"},state:d})},hasLastPageLeftInDirection:function(a){a.depth;var b=a.direction,c=a.pageSize,d=a.state;a=a.totalCount;d=o({direction:b,state:d});if(!d)return b==="forward"?a<=c:!1;return b==="forward"?d.afterCount<=c:d.beforeCount<=c},hasMoreInDirection:function(a){a.depth;var b=a.direction,c=a.state;a=a.totalCount;c=o({direction:b,state:c});if(!c)return b==="forward"?a>0:!1;return b==="forward"?c.hasNext:c.hasPrevious},hasPagedInDirection:function(a){a.depth;var b=a.direction;a=a.state;a=a.hasPaged;return a[b]},hasVisibleComments:function(a){var b=a.depth;a=a.state;return s.getVisibleComments({depth:b,state:a}).length>0},isCommentHiddenByViewer:function(a){return s.getHiddenStateForComment(a)!=null},isComposerVisible:function(a){a.depth;a=a.state;return a.canViewerComment&&a.expanded&&a.shouldComposerRenderWhenListIsExpanded},isListExpanded:function(a){a.depth;a=a.state;return a.expanded},isListLoading:function(a){var b=a.depth;a=a.state;return b!==0||a.__type!=="DEPTH_0"?!1:a.status.pending},isPagerLoading:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return!1;a=a[b];return a!=null?a.status.pending:!1},isPagerVisible:function(a){a.depth;var b=a.direction;a=a.state;a=a.pagers;if(!a)return!1;a=a[b];return a!=null},isRepliesCollapserVisible:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return!1;b=a.repliesCollapser;return b!=null},isRepliesExpanderLoading:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return!1;b=a.repliesExpander;return b!=null?b.status.pending:!1},isRepliesExpanderVisible:function(a){var b=a.depth;a=a.state;if(b===0||a.__type!=="DEPTH_1")return!1;b=a.repliesExpander;return b!=null}};e.exports={_updaterDepth0_DO_NOT_USE:a,_updaterDepth1_DO_NOT_USE:c,Selectors:s,StateUpdaters:aa}}),null);
__d("isUFI2ClientID",[],(function(a,b,c,d,e,f){"use strict";function a(a){return a.startsWith("client:")}e.exports=a}),null);
__d("UFI2CommentsProviderState",["FBLogger","gkx","isUFI2ClientID"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){return a!=null&&(a.is_locally_composed===!0||a.is_created_from_subscription===!0||a.optimistic_error!=null||a.optimistic_action!=null)}function h(a){return!a||a.spam_display_mode==null?!1:(a==null?void 0:a.spam_display_mode)!=="none"}function a(a){a=(a=a.feedback.display_comments)==null?void 0:a.before_count;return typeof a==="number"?a:null}function i(a){return a.filter(function(a){return b("isUFI2ClientID")(a)})}function j(a){__p&&__p();var c={};a=a?a.map(function(a){__p&&__p();if(!a){b("FBLogger")("ufi2").warn("UFI2CommentsProviderState.getCommentsFromEdges(...): Received null edge from comments connection.");return null}a=a.node;if(!a){b("FBLogger")("ufi2").warn("UFI2CommentsProviderState.getCommentsFromEdges(...): Received null comment from comments connection.");return null}var d=a.id;a=babelHelpers.objectWithoutPropertiesLoose(a,["id"]);if(typeof d!=="string"||d==null){b("FBLogger")("ufi2").warn("UFI2CommentsProviderState.getCommentsFromEdges(...): Received comment with null id from comments connection.");return null}c[d]=babelHelpers["extends"]({},a,{id:d});return d}).filter(Boolean):[];if(a.length>Object.keys(c).length){b("FBLogger")("ufi2").warn("UFI2CommentsProviderState.getCommentsFromEdges(...): Received duplicate comments from comments connection");var d=new Set();return{commentIDs:a.filter(function(a){if(d.has(a))return!1;d.add(a);return!0}),commentsByID:c}}return{commentIDs:a,commentsByID:c}}function k(a,c){var d=Object.keys(a),e=Object.keys(c),f=d.length,g=e.length;if(g>=f)return[];e.every(function(b){return Object.prototype.hasOwnProperty.call(a,b)})||b("FBLogger")("ufi2").warn("UFI2CommentsProvider: Expected next comments to be a subset of previous comments when removing a comment");g=d.filter(function(a){return!Object.prototype.hasOwnProperty.call(c,a)});return g}function l(a,c,d,e){__p&&__p();var f=[];d=a.filter(function(a){return!b("isUFI2ClientID")(a)});var g=function(){__p&&__p();if(i){if(j>=h.length)return"break";a=h[j++]}else{j=h.next();if(j.done)return"break";a=j.value}var b=a,d=e[b],g=d&&d.client_id!=null?d.client_id:null;g!=null&&c.find(function(a){return a===g})&&f.push({clientID:g,serverID:b})};for(var h=d,i=Array.isArray(h),j=0,h=i?h:h[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){d=g();if(d==="break")break}return f}function m(a,c,d){__p&&__p();if(d.length<=c.length)return[];var e=a[d[0]];if(!e){b("FBLogger")("ufi2").warn("UFI2CommentsProviderState.getNewlyCreatedCommentIDs(...): Next most recent comment not found");return[]}e=c.filter(function(b){return g(a[b])});c=d.filter(function(b){return g(a[b])});d=c.length-e.length>0;if(!d)return[];if(e.length===0){c.length>1&&b("FBLogger")("ufi2").info("UFI2CommentsProviderState.getNewlyCreatedCommentIDs(...): Received more than 1 new comment in a single update");return c}var f=new Set(e);return c.filter(function(a){return!f.has(a)})}function n(a,b){return b.filter(function(b){b=a[b];return b!=null&&h(b)})}function o(a,b,c){return c.filter(function(c){var d=a[c];c=b[c];return d!=null&&h(d)===!1&&h(c)===!0})}function p(a,b,c){return c.filter(function(c){var d=a[c];c=b[c];return d!=null&&h(d)===!0&&h(c)===!1})}function c(a,c){__p&&__p();var d=a.depth,e=c.commentsByID,f=c.commentIDs;a=j(a.edges);var g=a.commentIDs;a=a.commentsByID;var h=f.length,q=c.clientCommentIDs,r=g.length,s=i(g),t=c.selectedViewOption;c=c.isRefetchingConnection;var u=n(a,g),v=o(e,a,g),w=p(e,a,g);q=l(g,q,s,a);var x=r>h;h=h>r;r=x?m(a,f,g):[];x=h&&!c;f=x?k(e,a):[];h={clientCommentIDs:s,commentIDs:g,commentIDsUpdatedToServerIDs:q,commentsByID:a,hiddenCommentIDs:u,isRefetchingConnection:c,newlyCreatedCommentIDs:r,newlyHiddenCommentIDs:v,newlyUnhiddenCommentIDs:w,removedCommentIDs:f,selectedViewOption:t};b("gkx")("676930")&&window.__enableUFI2CommentsListLogging===!0&&(console.groupCollapsed("%cUFI2 Relay Comments Connection Update at depth "+d+":",";background-color:#75DBCD;color:#1F2D3D;opacity:0.7;font-weight:bold;"),console.groupEnd());return h}function d(a){a=a.edges;a=j(a);var b=a.commentIDs;a=a.commentsByID;var c=i(b),d=n(a,b);return{clientCommentIDs:c,commentIDs:b,commentIDsUpdatedToServerIDs:[],commentsByID:a,hiddenCommentIDs:d,isRefetchingConnection:!1,newlyCreatedCommentIDs:[],newlyHiddenCommentIDs:[],newlyUnhiddenCommentIDs:[],removedCommentIDs:[],selectedViewOption:null}}e.exports={getBeforeCount:a,getClientCommentIDs:i,getCommentIDsUpdatedToServerIDs:l,getCommentsFromEdges:j,getDerivedStateFromProps:c,getHiddenCommentIDs:n,getInitialState:d,getNewlyCreatedCommentIDs:m,getNewlyHiddenCommentIDs:o,getNewlyUnhiddenCommentIDs:p,getRemovedCommentIDs:k}}),null);
__d("UFI2LazyCodedErrorDialog.react",["FBLogger","JSResource","LoadingDialog.react","React","lazyLoadComponent"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("lazyLoadComponent")(b("JSResource")("UFI2CodedErrorDialog.react").__setRef("UFI2LazyCodedErrorDialog.react"));function a(a){var c=a.error;a=babelHelpers.objectWithoutPropertiesLoose(a,["error"]);if(Object.prototype.hasOwnProperty.call(c,"code")!=null&&Object.prototype.hasOwnProperty.call(c,"description")!=null&&Object.prototype.hasOwnProperty.call(c,"summary")!=null){var d,e=c;return(d=b("React")).jsx(d.Suspense,{fallback:d.jsx(b("LoadingDialog.react"),{}),children:d.jsx(g,babelHelpers["extends"]({},a,{codedError:e,width:445}))})}else{b("FBLogger")("ufi2").warn("A `UFI2LazyCodedError` was constructed with an `Error` object that doesn't conform to `CodedError`. Error: %s",String(c));return null}}e.exports=a}),null);
__d("getConsumerFacebookUFI2ComposerPlugins",["requireCond","JSResource","RelayModern","UFI2Config","createUFI2AssociateReplyWithParentComposerPlugin","cr:1197524","createUFI2ComposerStateSnapshotComposerPlugin","createUFI2ComposerTipPlugin","cr:1004782","createUFI2EmojiComposerPlugin","createUFI2EmoticonsComposerPlugin","createUFI2GIFComposerPlugin","createUFI2HashtagComposerPlugin","createUFI2MediaUploadComposerPlugin","createUFI2MentionsComposerPlugin","createUFI2PrefillMentionComposerPlugin","createUFI2SetReplyClickedComposerPlugin","cr:1101374","createUFI2StarsComposerPlugin","createUFI2StickersComposerPlugin","cr:1004783","getConsumerFacebookUFI2ComposerPlugins_feedback.graphql","getConsumerFacebookUFI2ComposerPlugins_group.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;b("RelayModern").graphql;var i=b("JSResource")("createUpgradedUFI2GroupMentionsComposerPlugin").__setRef("getConsumerFacebookUFI2ComposerPlugins"),j=b("JSResource")("createUpgradedUFI2MentionsComposerPlugin").__setRef("getConsumerFacebookUFI2ComposerPlugins");g!==void 0?g:g=b("getConsumerFacebookUFI2ComposerPlugins_feedback.graphql");h!==void 0?h:h=b("getConsumerFacebookUFI2ComposerPlugins_group.graphql");function a(a){__p&&__p();var c,d=a.environment,e=a.feedback,f=a.group;a=a.pluginsToInsertBeforePositions;var g=e.mentions_datasource_js_constructor_args_json;return[e.composer_tip!=null?b("createUFI2ComposerTipPlugin")({composer_tip:e.composer_tip}):null,b("cr:1004783")&&b("UFI2Config").shouldShowWritingHelp?b("cr:1004783")({environment:d,isAutoEnabled:!1}):null,f?b("createUFI2MentionsComposerPlugin")({maxResults:5,mentions_datasource_js_constructor_args_json:g,typeaheadViewProps:{__type:"GroupMentions",sortFn:function(a,b){__p&&__p();var c=a.getAuxiliaryData().renderType,d=b.getAuxiliaryData().renderType;if(c===d){var e=a.getAuxiliaryData().indexRank,f=b.getAuxiliaryData().indexRank;if(e===-1&&f!==-1)return-1;else if(e!==-1&&f===-1)return 1;else return a.getOrder()-b.getOrder()}e={bot:1,member:0,non_member:2,place:3};return e[c]-e[d]},viewProps:{bot:{aux:(c=f)!=null?(c=c.group_mentions_sections_info)!=null?c.bot_aux:c:c,title:(c=f)!=null?(c=c.group_mentions_sections_info)!=null?c.bot_title:c:c},member:{aux:(c=f)!=null?(c=c.group_mentions_sections_info)!=null?c.member_aux:c:c,title:(c=f)!=null?(c=c.group_mentions_sections_info)!=null?c.member_title:c:c},nonMember:{aux:(c=f)!=null?(c=c.group_mentions_sections_info)!=null?c.nonmember_aux:c:c,title:(c=f)!=null?(c=c.group_mentions_sections_info)!=null?c.nonmember_title:c:c}}},upgradedPluginResource:i}):b("createUFI2MentionsComposerPlugin")({maxResults:5,mentions_datasource_js_constructor_args_json:g,typeaheadViewProps:{},upgradedPluginResource:j})].concat(e.can_viewer_comment_with_stars===!0?b("createUFI2StarsComposerPlugin")({environment:d,feedbackID:(f=e)!=null?f.id:f}):[],[b("createUFI2HashtagComposerPlugin")(),b("cr:1004782")?b("cr:1004782")({size:10}):null],a?a["1"]||[]:[],b("createUFI2EmojiComposerPlugin")({size:16}),a?a["2"]||[]:[],[b("createUFI2EmoticonsComposerPlugin")({size:16})],a?a["3"]||[]:[],[e.can_viewer_comment_with_photo===!0&&e.can_viewer_comment_with_video===!0?b("createUFI2MediaUploadComposerPlugin")({feedback:e}):null],a?a["4"]||[]:[],e.can_viewer_comment_with_gif===!0?b("createUFI2GIFComposerPlugin")({ftentidentifier:e==null?void 0:e.id}):[],a?a["5"]||[]:[],e.can_viewer_comment_with_sticker===!0?b("createUFI2StickersComposerPlugin")({environment:d,targetID:(c=e)!=null?(c=c.owning_profile)!=null?c.id:c:c}):[],[b("cr:1197524")!=null&&(e==null?void 0:(g=e.viewer_actor)==null?void 0:(f=g.user_avatar)==null?void 0:f.has_fb_app_avatar)===!0?b("cr:1197524")({}):null,b("createUFI2PrefillMentionComposerPlugin")(),b("createUFI2AssociateReplyWithParentComposerPlugin")(),b("createUFI2SetReplyClickedComposerPlugin")(),e.can_see_voice_switcher===!0||e.flat_threading_config!=null?b("createUFI2ComposerStateSnapshotComposerPlugin")():null,b("cr:1101374")!=null?b("cr:1101374")({environment:d,ftentidentifier:e==null?void 0:e.id,surface:"newsfeed_comment_www"}):null]).filter(Boolean)}e.exports=a}),null);
__d("forEachUFI2DisplayCommentsConnection",["UFI2CommentsConnectionHandler"],(function(a,b,c,d,e,f){"use strict";var g=b("UFI2CommentsConnectionHandler").unstable_getAllConnectionsWithKey;function a(a,b,c){var d=!1;a=g(a,b,"UFI2CommentsProvider_feedback_display_comments");a!=null&&a.length>0&&(a.forEach(c),d=!0);return d}e.exports=a}),null);
__d("displayCommentsConnectionCountUpdater",["FBLogger","forEachUFI2DisplayCommentsConnection"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){__p&&__p();var c=a.feedbackId;a.feedbackSource;var d=a.modifier,e=a.store,f=a.topLevelFeedbackId,g=a.totalCommentCountModifier;function h(a){b("FBLogger")("ufi2").addMetadata("UFI","FEEDBACK_TARGET_ID",f||c||"UNKNOWN").addMetadata("UFI","RAW_DATA","comment_feedback_id;"+(c||"UNKNOWN")+", comments_count_modifier;"+(g||d)+", conn_count_modifier;"+d).warn(a)}a=e.get(c);if(a==null){h("could not find feedback record");return}b("forEachUFI2DisplayCommentsConnection")(e,a,function(a){var b=Math.max(0,Number(a.getValue("count"))+d);a.setValue(b,"count")});a=e.get(f||c);if(a==null){h("could not find top level feedback record");return}e=a.getLinkedRecord("top_level_comments");if(e==null){h("could not find top level comments");return}h=e.getValue("total_count");h=Math.max(0,Number(h)+(g||d));e.setValue(h,"total_count");e=a.getValue("comment_count_reduced");Number(e).toString()===e&&a.setValue(h.toString(),"comment_count_reduced")}g.decrement=function(a){return g(babelHelpers["extends"]({},a,{modifier:-1}))};g.increment=function(a){return g(babelHelpers["extends"]({},a,{modifier:1}))};e.exports=g}),null);
__d("getBodyRendererFromCommentMessage",["JSResource","RelayRuntime"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayRuntime").createPayloadFor3DField,h=b("JSResource")("CometUFICommentBodyTextWithEntities.react").__setRef("getBodyRendererFromCommentMessage"),i=b("JSResource")("CometUFICommentBodyTextWithEntities_textWithEntities$normalization.graphql").__setRef("getBodyRendererFromCommentMessage");function a(a,b){if(a==null)return a;a=j(a,b);return g("CometUFICommentBody_comment",i,h,babelHelpers["extends"]({__typename:"TextWithEntities"},a))}function j(a,b){var c=a.ranges==null?[]:a.ranges.filter(Boolean);return{aggregated_ranges:[],image_ranges:[],inline_style_ranges:[],ranges:c.map(function(a){var c=b[a.entity.id];if(c==null)return null;c=c.getData();var d=c.type;c=c.uri;return d==null?null:{entity:{__typename:d,id:a.entity.id,profile_url:c,url:c},length:a.length,offset:a.offset}}).filter(Boolean),text:a.text}}e.exports=a}),null);
__d("getRenderableBodyFromCommentMessage",[],(function(a,b,c,d,e,f){"use strict";__p&&__p();function a(a,b){__p&&__p();if(a==null)return a;var c=a.ranges==null?[]:a.ranges.filter(Boolean);return{__typename:"TextWithEntities",aggregated_ranges:[],delight_ranges:[],image_ranges:[],inline_style_ranges:[],ranges:c.map(function(a){__p&&__p();var c=b[a.entity.id];if(c){c=c.getData();var d=c.isWeak,e=c.type;c=c.uri;return{__typename:"EntityAtRange",entity:babelHelpers["extends"]({},a.entity,{__typename:e==null?"Actor":e.replace(/([A-Z])/g," $1").replace(/(\s+\w)/g,function(a,b){return b.toUpperCase()}).replace(/^./,function(a){return a.toUpperCase()}),profile_url:c,url:c}),entity_is_weak_reference:!!d,length:a.length,offset:a.offset}}return null}).filter(Boolean),text:a.text,translation_type:null}}e.exports=a}),null);
__d("makeUFI2ClientID",[],(function(a,b,c,d,e,f){"use strict";var g=0;function a(a){return a!=null&&a.startsWith("client:")?a:a!=null?"client:"+a:"client:feedback_comment:"+g++}e.exports=a}),null);
__d("UFI2CreateCommentMutation",["invariant","requireCond","Bootloader","ChannelClientID","CurrentUser","FBLogger","FeedbackSourceType","JSEnumValueToGraphQLKey","RelayModern","RelayRuntime","ServerTime","SiteData","displayCommentsConnectionCountUpdater","forEachUFI2DisplayCommentsConnection","getBodyRendererFromCommentMessage","getRenderableBodyFromCommentMessage","makeUFI2ClientID","qex","cr:1088250","UFI2CreateCommentMutation.graphql"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h,i=b("RelayModern").commitMutation;b("RelayModern").graphql;var j=b("RelayRuntime").ConnectionHandler,k=b("RelayRuntime").applyOptimisticMutation,l=b("SiteData").pr,m=h!==void 0?h:h=b("UFI2CreateCommentMutation.graphql"),n={};function o(a){__p&&__p();var c=a.actorID,d=a.containerMapping,e=a.environment,f=a.entitiesByID,h=a.feedbackSource,s=a.feedLocation,t=a.focusCommentID,u=a.input,v=a.isComet,w=a.onCompleted,x=a.onError,y=a.topLevelFeedbackId,z=a.updater,A=a.useDefaultActor,B=a.usedWritingHelpToCompose,C=a.UFI2CommentsProvider_commentsKey,D=b("makeUFI2ClientID")(a.clientID),E=a.retryID||D;d=babelHelpers["extends"]({},d,{UFI2CommentsProvider_commentsKey:C,feedLocation:s,feedbackSource:h,focusCommentID:t,input:babelHelpers["extends"]({},u,{actor_id:c,feedback_source:b("JSEnumValueToGraphQLKey")(b("FeedbackSourceType"),h),idempotence_token:E,session_id:b("ChannelClientID").getID()}),isComet:v,scale:l,useDefaultActor:A});var F=function(a){__p&&__p();return function(d){__p&&__p();var e=d.getRootField("comment_create");if(e){var f=e.getLinkedRecord("feedback_comment_edge");if(f){e=d.get(u.feedback_id);if(e!=null){(!b("qex")._("1341536")||u.live_video_timestamp==null||!v)&&b("forEachUFI2DisplayCommentsConnection")(d,e,function(a){j.insertEdgeBefore(a,f)});if(z){var i=y==null||y===e.getDataID()?null:d.get(y);z(e,f,i)}}}}e=d.get(c);e||g(0,455,c);i=d.get(E);i||g(0,456,E);i.setLinkedRecord(e,"author");i.setValue("ADD","optimistic_action");if(a&&a.toString){i.setValue(a.toString(),"optimistic_error");e=a.code;typeof e==="number"&&i.setValue(e,"optimistic_error_code")}else i.setValue(!0,"is_locally_composed");i.setValue(D,"client_id");i.setValue(u.reply_comment_parent_fbid,"reply_comment_parent_fbid");e=u.reply_comment_parent_fbid!=null?d.get(u.reply_comment_parent_fbid):null;e=e!=null?e.getValue("depth"):null;typeof e==="number"&&i.setValue(e+1,"depth");b("displayCommentsConnectionCountUpdater").increment({feedbackId:u.feedback_id,feedbackSource:h,store:d,topLevelFeedbackId:y})}},G={mutation:m,optimisticResponse:q(u,E,f),optimisticUpdater:F(),variables:d},H=null,I=i(e,babelHelpers["extends"]({},G,{onCompleted:function(a){p(a),w&&w(a),r(u)},onError:function(c){n[E]=function(){if(!n[E]){b("FBLogger")("ufi2").addMetadata("UFI","COMMENT_ID",E).warn("Tried to call a create comment mutation retry handle that was already removed.");return}I&&I.dispose();I=null;o(babelHelpers["extends"]({},a,{retryID:E}));delete n[E]},I=k(e,babelHelpers["extends"]({},G,{optimisticResponse:q(u,E,f),optimisticUpdater:F(c)})),x&&x(c)},updater:function(a){__p&&__p();var c=a.getRootField("comment_create");c||g(0,457);var d=c.getLinkedRecord("feedback_comment_edge");d||g(0,458);c=d.getLinkedRecord("node");c||g(0,459);c.setValue(!0,"is_locally_composed");c.setValue(D,"client_id");c.setValue(B===!0,"used_writing_help_to_compose");b("displayCommentsConnectionCountUpdater").increment({feedbackId:u.feedback_id,feedbackSource:h,store:a,topLevelFeedbackId:y});c=a.get(u.feedback_id);if(c!=null){(!b("qex")._("1341536")||u.live_video_timestamp==null||!v)&&b("forEachUFI2DisplayCommentsConnection")(a,c,function(a){j.insertEdgeBefore(a,d)});if(z){a=y==null||y===c.getDataID()?null:a.get(y);z(c,d,a)}}}}));return{dispose:function(){H&&H.remove(),H=null,I&&I.dispose(),I=null,delete n[E]}}}function p(a){var c=(a=a.comment_create)==null?void 0:(a=a.survey_primer_attributes)==null?void 0:a.ajaxify;c&&b("Bootloader").loadModules(["AsyncRequest"],function(a){new a(c).send()},"UFI2CreateCommentMutation")}function q(a,c,d){var e;return{comment_create:{detection_analytics_enabled:null,feedback_comment_edge:{cursor:null,node:{__typename:"Comment",attached_story:null,attachments:[],author:null,body:{ranges:[],text:a==null?void 0:(e=a.message)==null?void 0:e.text},body_renderer:b("getBodyRendererFromCommentMessage")(a.message,d),can_see_constituent_badge_upsell:null,can_show_multiple_identity_badges:!1,can_viewer_disable_preview:null,can_viewer_share:null,chat_to_buy:null,comment_menu_items:[],comment_menu_tooltip:null,comment_parent:null,create_detailed_report_uri:null,created_time:Math.round(b("ServerTime").getMillis()/1e3),edit_history:null,feedback:{associated_group:null,associated_video:null,can_viewer_comment:null,can_viewer_comment_with_marker:null,can_viewer_demote:!1,can_viewer_react:!0,comment_composer_placeholder:null,comment_count:null,comment_share_context:null,did_viewer_demote:!1,display_comments:null,id:null,page_private_reply:null,political_figure_data:null,reactors:null,share_fbid:null,subscription_target_id:null,supported_reactions:[],top_reactions:null,viewer_actor:null,viewer_feedback_reaction_info:null},file_marker:null,flat_threading_depth:null,group_comment_info:null,has_constituent_badge:null,id:c,identity_badges_web:[],inline_survey_config:null,insights_data_point:null,is_author_banned_by_content_owner:null,is_author_bot:null,is_author_non_coworker:null,is_author_original_poster:null,is_author_weak_reference:null,is_hidden_by_content_owner:null,is_markdown_enabled:null,is_the_comment_on_work_knowledge:null,legacy_fbid:void 0,legacy_token:null,living_room_content_item:a.living_room_content_item_id?{id:a.living_room_content_item_id}:null,page_admin_actor_info:null,parent_feedback:null,parent_post_story:null,preferred_body:b("getRenderableBodyFromCommentMessage")(a.message,d),private_reply_context:null,should_show_comment_menu:!1,spam_display_mode:"none",sub_reply_parent_above_comment_author_context:null,sub_reply_parent_preview_context:null,synced_intern_qa_answer:null,timestamp_in_video:void 0,translatability_for_viewer:null,translation_available_for_viewer:null,url:null,us_structured_reporting_enabled:null,written_while_video_was_live:void 0,www_layout_renderer:null}},survey_primer_attributes:null}}}function a(a){var c=n[a];if(!c){b("FBLogger")("ufi2").addMetadata("UFI","COMMENT_ID",a).warn("No comment create mutation retry handler found.");return null}return c}function r(a){if(!b("CurrentUser").isWorkUser())return;if(a.tracking==null)return;a=a.tracking[0];a=(a=JSON.parse((a=a)!=null?a:""))==null?void 0:a.top_level_post_id;a&&b("cr:1088250")&&b("cr:1088250")(a)}e.exports={commit:o,getRetryFn:a}}),null);
__d("UFI2RemovePreviewMutation",["RelayModern","UFI2RemovePreviewMutation.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=b("RelayModern").commitMutation;b("RelayModern").graphql;var i=g!==void 0?g:g=b("UFI2RemovePreviewMutation.graphql");function a(a,b){var c={comment_id:b.commentID};c={input:babelHelpers["extends"]({},c,{actor_id:b.actorID})};b={comment_delete_attachment:{comment:{attached_story:null,attachments:[],can_viewer_disable_preview:!1,id:b.commentID}}};return h(a,{mutation:i,optimisticResponse:b,variables:c})}e.exports={commit:a}}),null);
__d("useTrackingCodeFnForBlue",["getCommentCreateMutationPropertiesFromTrackingData"],(function(a,b,c,d,e,f){"use strict";a=function(){return b("getCommentCreateMutationPropertiesFromTrackingData")};e.exports=a}),null);
__d("useTrackingCodeFnForBlueOrComet",["requireCond","cr:886520"],(function(a,b,c,d,e,f){"use strict";e.exports=b("cr:886520")}),null);
__d("UFI2CommentShareNux.react",["AsyncRequest","BasicFBNux","Random","React","XBasicFBNuxGenShouldShowController","XUIAmbientNUX.react","setTimeout"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=7643,h=2e3,i=6e3;a=function(a){__p&&__p();babelHelpers.inheritsLoose(c,a);function c(){var c,d;for(var e=arguments.length,f=new Array(e),h=0;h<e;h++)f[h]=arguments[h];return(c=d=a.call.apply(a,[this].concat(f))||this,d.$1=!1,d.state={shouldShow:!1},d.closeNUX=function(){b("BasicFBNux").onDismiss(g),d.setState({shouldShow:!1})},c)||babelHelpers.assertThisInitialized(d)}var d=c.prototype;d.componentDidMount=function(){__p&&__p();var a=this;this.$1=!0;var c=b("XBasicFBNuxGenShouldShowController").getURIBuilder().setInt("nux_id",g).setBool("should_log_view",!1).getURI();b("setTimeout")(function(){new(b("AsyncRequest"))().setURI(c).setHandler(function(c){if(c.payload&&a.$1){c=c.payload.should_show_nux;b("BasicFBNux").onView(g);a.setState({shouldShow:c})}}).send()},b("Random").random()*(i-h)+h)};d.componentWillUnmount=function(){this.$1=!1};d.render=function(){return b("React").jsx(b("XUIAmbientNUX.react"),babelHelpers["extends"]({alignment:"right",onCloseButtonClick:this.closeNUX,position:"below",shown:this.state.shouldShow},this.props))};return c}(b("React").Component);e.exports=a}),null);
__d("getUFI2CommentsPagerLabel",["fbt","NumberFormat"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.labelType;a=a.numCommentsToShow;switch(c){case"view_one":return g._("Xem 1 b\u00ecnh lu\u1eadn");case"view_more":return g._("Xem th\u00eam b\u00ecnh lu\u1eadn");case"view_one_more":return g._("Xem th\u00eam 1 b\u00ecnh lu\u1eadn");case"view_more_explicit":return g._({"*":{"*":"Xem th\u00eam {count} b\u00ecnh lu\u1eadn","_1":"Xem th\u00eam {count} bi\u0300nh lu\u00e2\u0323n"}},[g._param("count",b("NumberFormat").formatInteger(a),[0,a]),g._plural(a)]);case"view_previous":return g._("Xem c\u00e1c b\u00ecnh lu\u1eadn tr\u01b0\u1edbc");case"view_previous_explicit":return g._({"*":{"*":"Xem {count} b\u00ecnh lu\u1eadn tr\u01b0\u1edbc"}},[g._param("count",b("NumberFormat").formatInteger(a),[0,a]),g._plural(a)]);case"view_comments_indeterminate":default:return g._("Xem b\u00ecnh lu\u1eadn")}}e.exports=a}),null);
__d("getUFI2RepliesPagerLabel",["fbt","NumberFormat"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){__p&&__p();var c=a.labelType,d=a.numCommentsToShow;a=a.numCommentsTotal;switch(c){case"view_one":return g._("Xem 1 ph\u1ea3n h\u1ed3i");case"view_more":return g._("Xem ph\u1ea3n h\u1ed3i kh\u00e1c");case"view_one_more":return g._("Xem th\u00eam 1 c\u00e2u tr\u1ea3 l\u1eddi");case"view_more_explicit":return g._({"*":{"*":"Xem th\u00eam {count} ph\u1ea3n h\u1ed3i","_1":"Xem th\u00eam {count} c\u00e2u tr\u1ea3 l\u1eddi"}},[g._param("count",b("NumberFormat").formatInteger(d),[0,d]),g._plural(d)]);case"view_previous":return g._("Xem c\u00e1c ph\u1ea3n h\u1ed3i tr\u01b0\u1edbc");case"view_previous_explicit":return g._({"*":{"*":"Xem {count} c\u00e2u tr\u1ea3 l\u1eddi tr\u01b0\u1edbc"}},[g._param("count",b("NumberFormat").formatInteger(d),[0,d]),g._plural(d)]);case"view_comments_indeterminate":return g._("Xem ph\u1ea3n h\u1ed3i");case"view_all":default:return g._({"*":"Xem t\u1ea5t c\u1ea3 {count} ph\u1ea3n h\u1ed3i"},[g._param("count",b("NumberFormat").formatInteger(a),[0,a])])}}e.exports=a}),null);
__d("getUFI2PagerLabel",["UFI2ViewOption","getUFI2CommentsPagerLabel","getUFI2RepliesPagerLabel","recoverableViolation"],(function(a,b,c,d,e,f){"use strict";__p&&__p();function g(a){__p&&__p();var c=a.Selectors,d=a.depth,e=a.direction,f=a.listState,g=a.pagerCount,h=a.pageSize,i=a.summaryTotalNumComments,j=a.totalCount;a=a.viewOption;var k=c.getVisibleCommentsCount({depth:d,state:f});c=c.hasLastPageLeftInDirection({depth:d,direction:e,pageSize:h,state:f,totalCount:j});f=b("UFI2ViewOption").isChronologicalOrder(a);j=f&&e==="backward"||!f&&e==="forward";if(k===0){if(g===1&&i===1)return"view_one";if(d>0)return"view_all";else return"view_comments_indeterminate"}else if(c&&g<=h)if(g===1)return"view_one_more";else return"view_more_explicit";if(j)return"view_more";else return"view_previous"}function a(a){__p&&__p();var c=a.Selectors,d=a.depth,e=a.direction,f=a.listState,h=a.totalCount,i=c.isPagerVisible({depth:d,direction:e,state:f});if(!i)return null;i=c.getPagerCount({depth:d,direction:e,state:f});if(i==null){b("recoverableViolation")("UFI2CommentsPager: Expected to have a pager count if pager was rendered","ufi2");return null}c=g(babelHelpers["extends"]({},a,{pagerCount:i}));e=d>0;return e?b("getUFI2RepliesPagerLabel")({labelType:c,numCommentsToShow:i,numCommentsTotal:h}):b("getUFI2CommentsPagerLabel")({labelType:c,numCommentsToShow:i})}e.exports=a}),null);
__d("UFI2FeedbackSubscriptionTopicProvider",["FBLogger","RelayRTIGraphQLSubscriptionTopicProvider","RelayRuntime","relay-runtime/query/GraphQLTag"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g=b("RelayRuntime").getRequest,h=b("relay-runtime/query/GraphQLTag").isRequest,i={};function j(a){return function(b){var c;b=(c=(c=b.input)==null?void 0:c.feedback_id)!=null?c:(c=b.input)==null?void 0:c.top_level_feedback_id;c=i[b];return c==null?null:a+c}}function a(a,c){if(h(a)===!1){b("FBLogger")("ufi2").warn("The `subscription` passed to `registerProvider()` must be a `ConcreteRequest`.");return}a=g(a);a=a.params.id;a!=null&&(a!=null&&typeof a==="string"&&b("RelayRTIGraphQLSubscriptionTopicProvider").registerProvider(a,j(c)))}function c(a,b){i[a]=b}e.exports={addSubscriptionTargetIDForFeedbackID:c,registerProvider:a}}),null);
__d("UFI2FeedbackCommentReactSubscription",["RelayModern","UFI2FeedbackSubscriptionTopicProvider","UFI2FeedbackCommentReactSubscription_feedback.graphql","UFI2FeedbackCommentReactSubscription.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h;b("RelayModern").graphql;var i=b("RelayModern").requestSubscription;g!==void 0?g:g=b("UFI2FeedbackCommentReactSubscription_feedback.graphql");var j=h!==void 0?h:h=b("UFI2FeedbackCommentReactSubscription.graphql");b("UFI2FeedbackSubscriptionTopicProvider").registerProvider(j,"gqls/comment_like_subscribe/top_level_feedback_id_");function a(a,c,d,e,f){b("UFI2FeedbackSubscriptionTopicProvider").addSubscriptionTargetIDForFeedbackID(c.top_level_feedback_id,e);return i(a,{subscription:j,variables:{input:c,isComet:f,useDefaultActor:d}})}e.exports={subscribe:a}}),null);
__d("UFI2FeedbackReactSubscription",["RelayModern","UFI2FeedbackSubscriptionTopicProvider","UFI2FeedbackReactSubscription_feedback.graphql","UFI2FeedbackReactSubscription_liker.graphql","UFI2FeedbackReactSubscription_viewer.graphql","UFI2FeedbackReactSubscription.graphql"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h,i,j;b("RelayModern").graphql;var k=b("RelayModern").requestSubscription;g!==void 0?g:g=b("UFI2FeedbackReactSubscription_feedback.graphql");h!==void 0?h:h=b("UFI2FeedbackReactSubscription_liker.graphql");i!==void 0?i:i=b("UFI2FeedbackReactSubscription_viewer.graphql");var l=j!==void 0?j:j=b("UFI2FeedbackReactSubscription.graphql");b("UFI2FeedbackSubscriptionTopicProvider").registerProvider(l,"gqls/feedback_like_subscribe/feedback_id_");function a(a,c,d,e){__p&&__p();b("UFI2FeedbackSubscriptionTopicProvider").addSubscriptionTargetIDForFeedbackID(c.feedback_id,e);return k(a,{subscription:l,updater:function(a,b){__p&&__p();var c,d;c=(c=b.feedback_like_subscribe)==null?void 0:(c=c.liker)==null?void 0:c.id;d=(d=b.feedback_like_subscribe)==null?void 0:(d=d.viewer)==null?void 0:(d=d.actor)==null?void 0:d.id;if(c!==d){b=(c=b.feedback_like_subscribe)==null?void 0:(d=c.feedback)==null?void 0:d.id;if(b){c=a.get(b);c&&c.setValue(!0,"is_unseen")}}},variables:{input:c,useDefaultActor:d}})}e.exports={subscribe:a}}),null);
__d("UFI2ToggleCommentPermissionSubscription",["RelayModern","UFI2FeedbackSubscriptionTopicProvider","UFI2ToggleCommentPermissionSubscription.graphql"],(function(a,b,c,d,e,f){"use strict";var g;b("RelayModern").graphql;var h=b("RelayModern").requestSubscription,i=g!==void 0?g:g=b("UFI2ToggleCommentPermissionSubscription.graphql");b("UFI2FeedbackSubscriptionTopicProvider").registerProvider(i,"gqls/feedback_comment_permission_toggle_subscribe/feedback_id_");function a(a,c,d,e){b("UFI2FeedbackSubscriptionTopicProvider").addSubscriptionTargetIDForFeedbackID(c.feedback_id,e);return h(a,{subscription:i,variables:{input:c,useDefaultActor:d}})}e.exports={subscribe:a}}),null);
__d("RelayUFI2Environment",["invariant","requireCond","ActorURIConfig","PinnedCommentEventsConnectionHandler","RelayAPIConfig","RelayFBOperationLoader","RelayRuntime","UFI2CommentsConnectionHandler","VideoTimestampedCommentsConnectionHandler","cr:1121434","createRelayFBNetwork","createRelayFBNetworkFetch","createRelayFBSubscribeFunction","relayFBGetDataID","resolveImmediate"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();var h=(c=b("RelayRuntime")).ConnectionHandler,i=c.Environment,j=c.QueryResponseCache,k=c.RecordSource,l=c.Store,m=10,n=5*60*1e3,o={};a(b("RelayAPIConfig").actorID);function p(a){switch(a){case"connection":return h;case"video_timestamped_comments":return b("VideoTimestampedCommentsConnectionHandler");case"pinned_comment_events":return b("PinnedCommentEventsConnectionHandler");case"ufi2_comments":return b("UFI2CommentsConnectionHandler")}g(0,11762,a)}function a(a){__p&&__p();if(!Object.prototype.hasOwnProperty.call(o,a)){var c=new j({size:m,ttl:n});c=b("createRelayFBNetwork")(b("createRelayFBNetworkFetch")(babelHelpers["extends"]({},a!=null?{actorID:a,getAdditionalData:function(){var c;return c={},c[b("ActorURIConfig").PARAMETER_ACTOR]=a,c}}:null,{queryResponseCache:c})),b("createRelayFBSubscribeFunction")({queryResponseCache:c}));var d=new k();d=new l(d,{UNSTABLE_DO_NOT_USE_getDataID:b("relayFBGetDataID"),gcReleaseBufferSize:10,gcScheduler:b("resolveImmediate"),operationLoader:b("RelayFBOperationLoader")});o[a]=new i({UNSTABLE_DO_NOT_USE_getDataID:b("relayFBGetDataID"),configName:"RelayUFI2Environment(actor:"+String(a)+")",handlerProvider:p,log:b("cr:1121434")!=null?b("cr:1121434")():null,network:c,operationLoader:b("RelayFBOperationLoader"),store:d})}return o[a]}e.exports={forActor:a,handlerProvider:p}}),null);
__d("UFI2AbstractButtonWrapper.react",["requireCond","cr:829648"],(function(a,b,c,d,e,f){"use strict";e.exports=b("cr:829648")}),null);
__d("UFI2ActiveLayerMonitor",["ErrorUtils","Parent","SubscriptionsHandler","UserActivity","getDocumentScrollElement"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[],i=!1,j=b("getDocumentScrollElement")(),k=[],l;function m(a){i=!0;k.push.apply(k,h);while(k.length){var c=k.shift();(g||(g=b("ErrorUtils"))).applyWithGuard(c,null,[a],null,"UFI2ActiveLayerMonitor")}i=!1}function n(a){j!==a&&(j=a,m(a))}a={getLastActiveLayer:function(){return j},subscribe:function(a){__p&&__p();h.push(a);i&&k.push(a);l==null&&(l=new(b("SubscriptionsHandler"))(),l.addSubscriptions(b("UserActivity").subscribe(function(a,c){a=c.event;n(b("Parent").byClass(a.target,"uiLayer")||b("getDocumentScrollElement")())})));var c=!1;return{remove:function(){__p&&__p();if(c)return;var b=h.indexOf(a);b!==-1&&h.splice(b,1);if(i){b=k.indexOf(a);b!==-1&&k.splice(b,1)}h.length===0&&(l&&(l.release(),l=null));c=!0}}}};e.exports=a}),null);
__d("UFI2BluePrimerDialog.react",["React"],(function(a,b,c,d,e,f){"use strict";e.exports=function(a){var c=a.Component;a=a.props;return b("React").jsx(c,babelHelpers["extends"]({},a))}}),null);
__d("UFI2CometRelayCreateFragmentContainer",["requireCond","cr:936168","relay-runtime"],(function(a,b,c,d,e,f){"use strict";a=b("relay-runtime").graphql;e.exports={createFragmentContainer:b("cr:936168").createFragmentContainer,graphql:a}}),null);
__d("UFI2LocalUserAction",["EventEmitter"],(function(a,b,c,d,e,f){"use strict";e.exports=new(b("EventEmitter"))()}),null);
__d("UFI2PrimerDialogWrapper.react",["requireCond","cr:828359"],(function(a,b,c,d,e,f){"use strict";e.exports=b("cr:828359")}),null);
__d("UFI2ScaleRect",["invariant","FBLogger"],(function(a,b,c,d,e,f,g){"use strict";__p&&__p();function a(a){return h(a,!0)}function c(a){return h(a,!1)}function h(a,c){__p&&__p();var d=a.srcHeight,e=a.srcWidth,f=a.maxHeight,h=a.maxWidth;a=a.gracefullyFallbackToMaxDimensionWhenHeightOrWidthIsZero;!1===a?(d>0||g(0,5272,d),e>0||g(0,5273,e)):(d===0||e===0)&&b("FBLogger")("ufi2").warn("Scaling UFI2 rect with invalid zero height or width: height=%s / width=%s",String(d),String(e));f>0||g(0,5274,f);h>0||g(0,5275,h);d=a&&d===0?f:d;a=a&&e===0?h:e;e=h/a;h=f/d;f=c?Math.min(e,h):Math.min(e,h,1);return{height:Math.round(d*f),width:Math.round(a*f)}}e.exports={scaleToContain:a,shrinkToContain:c}}),null);
__d("UFI2SubscriptionManager",["cancelIdleCallback","requestIdleCallbackAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();a=function(){__p&&__p();function a(){this.$1=new Set(),this.$2=new Set(),this.$3=!1}var c=a.prototype;c.add=function(a){var b=this;this.$1.add(a);this.$3&&a.subscribe();return{dispose:function(){a.unsubscribe(),b.$1&&b.$1["delete"](a)}}};c.subscribeAll=function(){__p&&__p();if(!this.$3){this.$3=!0;for(var a=this.$1,b=Array.isArray(a),c=0,a=b?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var d;if(b){if(c>=a.length)break;d=a[c++]}else{c=a.next();if(c.done)break;d=c.value}d=d;d.subscribe()}}};c.subscribeAllOnIdle=function(){__p&&__p();var a=this;if(!this.$3){this.$3=!0;var c=function(){__p&&__p();if(e){if(f>=d.length)return"break";g=d[f++]}else{f=d.next();if(f.done)return"break";g=f.value}var c=g,h=null;h=b("requestIdleCallbackAcrossTransitions")(function(){h!=null&&(a.$2["delete"](h),h=null),a.$3&&c.subscribe()});a.$2.add(h)};for(var d=this.$1,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g,h=c();if(h==="break")break}}};c.unsubscribeAll=function(){__p&&__p();if(this.$3){this.$3=!1;for(var a=this.$2,c=Array.isArray(a),d=0,a=c?a:a[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var e;if(c){if(d>=a.length)break;e=a[d++]}else{d=a.next();if(d.done)break;e=d.value}e=e;b("cancelIdleCallback")(e)}for(var e=this.$1,d=Array.isArray(e),c=0,e=d?e:e[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){if(d){if(c>=e.length)break;a=e[c++]}else{c=e.next();if(c.done)break;a=c.value}a=a;a.unsubscribe()}}};c.reset=function(){this.unsubscribeAll(),this.$1=new Set()};return a}();e.exports=a}),null);
__d("UFI2UserActivityIdleTimeout",[],(function(a,b,c,d,e,f){"use strict";e.exports=3e4}),null);
__d("UFI2UserActivityMonitor",["ErrorUtils","Event","ExecutionEnvironment","SubscriptionsHandler","UFI2UserActivityIdleTimeout","UserActivity","Visibility","clearTimeout","setTimeoutAcrossTransitions"],(function(a,b,c,d,e,f){"use strict";__p&&__p();var g,h=[],i,j=!1,k=b("ExecutionEnvironment").canUseDOM&&b("UserActivity").isOnTab()&&b("UserActivity").isActive(b("UFI2UserActivityIdleTimeout"))?"ACTIVE":"INACTIVE",l=[],m;function n(a){j=!0;l.push.apply(l,h);var c=function(){var c=l.shift();(g||(g=b("ErrorUtils"))).applyWithGuard(function(){return c(a)},null,null,null,"UFI2UserActivityMonitor")};while(l.length)c();j=!1}function o(a){b("clearTimeout")(i),a>0&&(i=b("setTimeoutAcrossTransitions")(function(){p("INACTIVE")},a))}function p(a){var b=k;k=a;b!==a&&n(a)}a={getActivityState:function(){return k},init:function(){m==null&&(o(Math.max(0,b("UFI2UserActivityIdleTimeout")-(Date.now()-b("UserActivity").getLastActive()))),m=new(b("SubscriptionsHandler"))(),m.addSubscriptions(b("UserActivity").subscribe(function(a,c){a=c.event;if(/^mouse(enter|leave|move|over|out)$/.test(a.type)&&b("UserActivity").isOnTab()===!1)return;p("ACTIVE");o(Math.max(0,b("UFI2UserActivityIdleTimeout")-(Date.now()-b("UserActivity").getLastActive())))}),b("Event").listen(window,"blur",function(){p("INACTIVE"),b("clearTimeout")(i)}),b("Visibility").addListener(b("Visibility").HIDDEN,function(){p("INACTIVE"),b("clearTimeout")(i)})))},subscribe:function(a){__p&&__p();h.push(a);j&&l.push(a);var c=!1;return{remove:function(){__p&&__p();if(c)return;var d=h.indexOf(a);d!==-1&&h.splice(d,1);if(j){d=l.indexOf(a);d!==-1&&l.splice(d,1)}h.length===0&&b("clearTimeout")(i);c=!0}}}};b("ExecutionEnvironment").canUseDOM&&a.init();e.exports=a}),null);